#!/usr/bin/env sh

set -eu

zfs list --json -o mountpoint,mounted |
  jq --raw-output '
  .datasets[]
  | select(.properties.mountpoint.value == "/")
  | select(.properties.mounted.value == "yes") # make sure no inherited nonsense is included
  | .pool
  '
